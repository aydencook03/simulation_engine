# TODO / IDEAS

- Short Term
  - [X] develop a good abstraction/api for constraints
  - [ ] doc comment for Constraint
    - [ ] comment explaining math and equations of XPBD
    - [ ] static vs non-static, xpbd vs non-xpbd
    - [ ] how to derive constraint force from lagrange multiplier
  - [X] simplify the abstraction/api for fields
    - [X] remove dt
  - [X] account for N's 3rd law in the ParticleParticle interaction (can enable optimizations?)
  - [ ] investigate
    - [ ] why does non-xpbd conserve angular momentum while xpbd does not?
    - [ ] why does non-xpbd conserve kinetic energy while xpbd does not?
    - [ ] step through non-xpbd algorithm w/ variables to prove the conservation of quantities
  - [ ] real-time 3d renderer w/ simple interaction (using bevy)
  - [ ] support particle sources and sinks
  - [ ] different boundary conditions
    - [ ] periodic (teleport)
  - [ ] support breakable constraints (max constraint force and broken properties)
  - [ ] non-dynamical particles (central gravity bodies, boundary particles, constraint & spring attachments, platforms, etc.)
  - [ ] a common functionality implementation of SPH smoothing
    - [ ] different smoothing kernels & their gradient, divergence, laplacian, etc
    - [ ] different modifications to the kernels for certain symmetries and properties
    - [ ] different boundary conditions
  - [X] builder methods for builtin fields & constraints
  - [X] fix BoxBound instability
  - [ ] a general purpose (common functionality) Mesh object
    - [ ] derivatives, gradients, laplacian, etc defined on it
    - [ ] different types:
      - [ ] structured (FDM, FVM, FEM)
        - [ ] 2d: orthogonal quadrilateral / lattice graph. 3d: hexahedral
      - [ ] unstructured (FVM, FEM)
        - [ ] 2d: quadrilateral, triangular. 3d: tetrahedral
        - [ ] surface mesh
    - [ ] mesh <=> connected particles
    - [ ] different boundary conditions (Neumann, dirichet, etc)

- Examples
  - [ ] cantilever
  - [ ] pile of blocks
  - [ ] cloth
  - [ ] jello block
  - [ ] planet collision
  - [ ] dam break
  - [ ] pile of sand

- Fields
  - [ ] electrostatic (Coulomb) force
  - [ ] particle-mesh-method newtonian gravity
  - [ ] SPH newtonian gravity mesh
  - [ ] electromagnetic
  - [ ] material point method mesh
  - [ ] rayleigh dissipation function

- Constraints / Position Based Dynamics
  - [X] compliance, rayleigh dissipation / damping
  - [X] stretching (for young's modulus)
  - [ ] bending
  - [ ] isometric bending?
  - [ ] particle-triangle collisions
  - [X] contact plane collisions (for general purpose shapes & environment)
    - [ ] w/ friction
  - [X] particle-particle non-penetration
    - [ ] w/ friction (position level friction & averaging of velocity friction)
  - [ ] tetrahedral volume conservation (for bulk modulus) (use neo-hookean bc it doesn't need polar decomposition?)
  - [ ] triangle area conservation
  - [ ] shear (for shear modulus)
  - [ ] neo-hookean soft body (tetrahedral hydrostatic constraint & deviatoric constraint)
  - [ ] closed triangle mesh overpressure
  - [ ] fluid w/ surface tension, cohesion, viscosity
  - [ ] cloth drag
  - [ ] shape matching?
  - [ ] generic constraint API
    - see what common behavior can be consolidated into the constraint trait

- Collision Handling
  - [ ] collision / impulse forces
  - [ ] friction
  - [ ] viscosity

- Thermodynamics
  - [ ] research how to implement a good general macroscopic thermodynamics model
  - [ ] conduction, advection, radiation, friction, collisions
  - [ ] state variables & state equations
    - what is needed in this engine? pos, vel, temp, radius?
    - fields can alter any of these state variables. a field could implement a certain state eqn?
  - [ ] thermal expansion
  - [ ] phase changes

- Compilation Features
  - [ ] serialization of System struct and saving/loading from file (using serde)
  - [ ] load and run a serialized system from the command line (create folder of serialized examples)
  - [ ] object mesh file loading (for FEM-like analysis)?
  - [ ] parallelize using simd, rayon, bevy_tasks::ParallelIterator, etc
  - [ ] wgpu acceleration

- Rendering
  - [ ] animation baking (both 3d and 2d)
    - [ ] save/serialize System state to file once the animation is completed
  - [ ] color based on radiation/temperature
  - [ ] good 3d rendering
    - [ ] isosurface/isoline rendering?
    - [ ] sph-like smoothing

- Algorithms
  - [ ] spawning composite shapes of particles (spheres, blocks, etc)
  - [ ] hash map collision detection
  - [ ] tree method collision detection
  - [ ] tree methods for optimized n-body forces

- Physics
  - [ ] intermolecular forces
    - [ ] solids (covalent/ionic/metallic bonds)
      - [ ] covalent bond potential, electrostatic attraction
      - [ ] xpbd distance constraints w/ compliance
      - [ ] smoothed-particle-hydrodynamics
      - [ ] material-point-method
    - [ ] liquids & gases (intermolecular forces & hydrogen bonds)
      - [ ] Lennard-Jones 6-12, 6-9, 10-12, electrostatic attraction
      - [ ] smoothed-particle-hydrodynamics
      - [ ] material-point-method
      - [ ] position-based-fluids
  - [ ] soft bodies
    - [ ] volume conserving, pnuematic, etc
  - [ ] plastic deformation (break constraint and then create a new one in the new location?)
  - [ ] bouncy objects
  - [ ] granular materials
  - [ ] extend engine to support rigid bodies (a particle with orientation, shape, inertia) (like bullet, rapier, xpbd, etc)